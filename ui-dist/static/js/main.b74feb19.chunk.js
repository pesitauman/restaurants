(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(t,e,n){t.exports=n(67)},66:function(t,e,n){},67:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),u=n(14),c=n.n(u),o=n(10),s=n(12),l=n(29),i=n(15);var p=Object(s.c)({visibilityFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_VISIBILITY_FILTER":return e.filter;default:return t}},restaurants:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"DELETE":return t.filter(function(t){return t.Id!==e.data.Id});case"UPDATE":return t.map(function(t){return t.Id===e.data.restaurant.Id?e.data.restaurant:t});case"LOAD":return e.data;default:return t}},current:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_CURRENT":return e.data.restaurant;case"RESET_CURRENT":case"DELETE":case"UPDATE":return null;case"CHANGE_CURRENT":return Object(i.a)({},t,e.data);default:return t}}}),f=Object(s.d)(p,Object(s.a)(l.a)),d=n(3),h=n(4),m=n(6),E=n(5),b=n(7),v=n(1),y=n.n(v),g=n(8),C=n(13),O=n.n(C),j=n(31),w=n(16),k=n.n(w);function T(t){return x.apply(this,arguments)}function x(){return(x=Object(g.a)(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(e.map(function(){var t=Object(g.a)(y.a.mark(function t(e){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i.a,t.t1={},t.t2=e,t.next=5,N(e.Location);case 5:return t.t3=t.sent,t.t4={address:t.t3},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t4));case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function N(t){return I.apply(this,arguments)}function I(){return(I=Object(g.a)(y.a.mark(function t(e){var n,a,r,u,c;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.split("/",2),a=Object(j.a)(n,2),r=a[0],u=a[1],r&&u){t.next=3;break}return t.abrupt("return",e);case 3:return t.next=5,k.a.fromLatLng(parseFloat(r),parseFloat(u));case 5:return c=t.sent,t.abrupt("return",c.results[0].formatted_address);case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}function P(t){return R.apply(this,arguments)}function R(){return(R=Object(g.a)(y.a.mark(function t(e){var n,a,r,u;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.fromAddress("Eiffel Tower");case 2:return n=t.sent,a=n.results[0].geometry.location,r=a.lat,u=a.lng,t.abrupt("return","".concat(r,"/").concat(u));case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}function D(t){return{type:"LOAD",data:t}}k.a.setApiKey("AIzaSyCRLCb1n3Kvi4mUh1HLUjopmtg70iWPZk8");var S=function(t){function e(){return Object(d.a)(this,e),Object(m.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(b.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("tr",null,r.a.createElement("td",null,this.props.restaurant.Name," "),r.a.createElement("td",null,this.props.restaurant.Type," "),r.a.createElement("td",null,this.props.restaurant.Phone," "),r.a.createElement("td",null,this.props.restaurant.address," "),r.a.createElement("td",null,r.a.createElement("input",{type:"button",value:"edit",onClick:function(){return t.props.onSetCurrent(t.props.restaurant)}})))}}]),e}(r.a.Component),U=function(t){function e(){return Object(d.a)(this,e),Object(m.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(b.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){this.props.onFetch()}},{key:"render",value:function(){var t=this;return r.a.createElement("table",{className:"restaurant-list"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Type"),r.a.createElement("th",null,"Phone"),r.a.createElement("th",null,"Location"))),r.a.createElement("tbody",null,this.props.restaurants&&this.props.restaurants.length?this.props.restaurants.map(function(e){return r.a.createElement(S,{key:"restaurant-".concat(e.Id),restaurant:e,onSetCurrent:t.props.onSetCurrent})}):r.a.createElement("tr",null,r.a.createElement("td",null,"No restaurants"))))}}]),e}(r.a.Component),L=Object(o.b)(function(t){return{restaurants:t.restaurants||{data:[]}}},function(t){return{onFetch:function(){t(function(){var t=Object(g.a)(y.a.mark(function t(e){var n,a;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("api/restaurants/");case 2:return n=t.sent,a=n.data,t.t0=e,t.t1=D,t.next=8,T(a);case 8:t.t2=t.sent,t.t3=(0,t.t1)(t.t2),(0,t.t0)(t.t3);case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},onSetCurrent:function(e){t({type:"SET_CURRENT",data:{restaurant:e}})}}})(U),A=function(t){function e(t){var n;return Object(d.a)(this,e),(n=Object(m.a)(this,Object(E.a)(e).call(this,t))).onFileChange=function(t){n.setState({file:t.target.files[0]})},n.state={file:null},n}return Object(b.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("input",{className:"restaurant-input",type:"file",onChange:this.onFileChange}),r.a.createElement("input",{type:"button",value:"Upload",onClick:function(){return t.props.onUpload(t.state.file)}}))}}]),e}(r.a.Component),F=Object(o.b)(null,function(t){return{onUpload:function(e){t(function(t){return function(){var e=Object(g.a)(y.a.mark(function e(n){var a,r,u;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t),e.next=4,O.a.post("api/restaurants/upload",a);case 4:return r=e.sent,u=r.data,e.t0=n,e.t1=D,e.next=10,T(u);case 10:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}(e))}}})(A),_=n(30),H=n.n(_),B=function(t){function e(){return Object(d.a)(this,e),Object(m.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(b.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(H.a,{value:this.props.address,onChange:function(e){return t.props.onAddressChange(e)},onSelect:function(e){return t.props.onAddressChange(e)}},function(t){var e=t.getInputProps,n=t.suggestions,a=t.getSuggestionItemProps,u=t.loading;return r.a.createElement("span",null,r.a.createElement("input",e({placeholder:"Search Places ...",className:"location-search-input"})),r.a.createElement("ul",{className:"autocomplete-dropdown-container"},u&&r.a.createElement("li",null,"..."),n.map(function(t){var e=t.active?"suggestion-item--active":"suggestion-item",n=t.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("li",a(t,{className:e,style:n}),r.a.createElement("span",null,t.description))})))})}}]),e}(r.a.Component),G=function(t){function e(){return Object(d.a)(this,e),Object(m.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(b.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;return this.props.restaurant?r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("h3",null,"Restaurant Editor"),r.a.createElement("div",null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{value:this.props.restaurant.Name,onChange:function(e){return t.props.onPropChange({Name:e.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",null,"Type"),r.a.createElement("input",{value:this.props.restaurant.Type,onChange:function(e){return t.props.onPropChange({Type:e.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",null,"Phone"),r.a.createElement("input",{value:this.props.restaurant.Phone,onChange:function(e){return t.props.onPropChange({Phone:e.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",null,"Location"),r.a.createElement(B,{address:this.props.restaurant.address,onAddressChange:function(e){return t.props.onPropChange({address:e})}})),r.a.createElement("button",{onClick:function(e){return t.props.onUpdate(e,t.props.restaurant)}},"Save"),r.a.createElement("button",{onClick:function(e){return t.props.onDelete(e,t.props.restaurant)}},"Delete"),r.a.createElement("button",{onClick:function(e){return t.props.onCancel(e,t.props.restaurant)}},"Cancel"))):""}}]),e}(r.a.Component),J=Object(o.b)(function(t){return{restaurant:t.current}},function(t){return{onUpdate:function(e,n){e.preventDefault(),t(function(t){return function(){var e=Object(g.a)(y.a.mark(function e(n){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.address);case 2:return t.Location=e.sent,e.next=5,O.a.put("api/restaurants/".concat(t.Id),t);case 5:n({type:"UPDATE",data:{restaurant:t}});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}(n))},onDelete:function(e,n){e.preventDefault(),t(function(t){return function(){var e=Object(g.a)(y.a.mark(function e(n){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("api/restaurants/".concat(t.Id));case 2:n({type:"DELETE",data:{Id:t.Id}});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}(n))},onCancel:function(e,n){e.preventDefault(),t({type:"RESET_CURRENT",data:n})},onPropChange:function(e){t({type:"CHANGE_CURRENT",data:e})}}})(G),K=(n(66),document.getElementById("app"));c.a.render(r.a.createElement(o.a,{store:f},r.a.createElement(L,null),r.a.createElement(F,null),r.a.createElement(J,null)),K)}},[[32,1,2]]]);
//# sourceMappingURL=main.b74feb19.chunk.js.map