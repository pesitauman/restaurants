{"ast":null,"code":"import _regeneratorRuntime from \"/Users/pesiakovitz/goApps/src/restaurants/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/pesiakovitz/goApps/src/restaurants/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/Users/pesiakovitz/goApps/src/restaurants/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { geocodeByAddress, getLatLng } from 'react-places-autocomplete';\nimport google from 'googleapis';\nexport function parseData(_x) {\n  return _parseData.apply(this, arguments);\n}\n\nfunction _parseData() {\n  _parseData = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(data) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", Promise.all(data.map(\n            /*#__PURE__*/\n            function () {\n              var _ref = _asyncToGenerator(\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee(restaurent) {\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.t0 = _objectSpread;\n                        _context.t1 = {};\n                        _context.t2 = restaurent;\n                        _context.next = 5;\n                        return locationToAddress(restaurent.Location);\n\n                      case 5:\n                        _context.t3 = _context.sent;\n                        _context.t4 = {\n                          address: _context.t3\n                        };\n                        return _context.abrupt(\"return\", (0, _context.t0)(_context.t1, _context.t2, _context.t4));\n\n                      case 8:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function (_x4) {\n                return _ref.apply(this, arguments);\n              };\n            }())));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _parseData.apply(this, arguments);\n}\n\nexport function locationToAddress(_x2) {\n  return _locationToAddress.apply(this, arguments);\n}\n\nfunction _locationToAddress() {\n  _locationToAddress = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(location) {\n    var geocoder, latlngStr, latlng;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            // return Promise.resolve('dffdf');\n            geocoder = new google.maps.Geocoder();\n            latlngStr = location.split(',', 2);\n            latlng = {\n              lat: parseFloat(latlngStr[0]),\n              lng: parseFloat(latlngStr[1])\n            };\n            return _context3.abrupt(\"return\", new Promise(function (resolve, reject) {\n              geocoder.geocode({\n                'location': latlng\n              }, function (results, status) {\n                if (status === 'OK') {\n                  console.log('google result:', results);\n                  resolve(results[0].formatted_address);\n                } else {\n                  console.log('google error');\n                  reject(new Error(\"Couldn't find the location for \".concat(location)));\n                }\n              });\n            }));\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _locationToAddress.apply(this, arguments);\n}\n\nexport function addressToLatLng(_x3) {\n  return _addressToLatLng.apply(this, arguments);\n}\n\nfunction _addressToLatLng() {\n  _addressToLatLng = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(address) {\n    var results, latLng;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return geocodeByAddress(address);\n\n          case 2:\n            results = _context4.sent;\n            _context4.next = 5;\n            return getLatLng(results[0]);\n\n          case 5:\n            latLng = _context4.sent;\n            console.log('important:', latLng);\n            return _context4.abrupt(\"return\", \"\".concat(latLng.lat, \",\").concat(latLng.lng));\n\n          case 8:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _addressToLatLng.apply(this, arguments);\n}","map":{"version":3,"sources":["/Users/pesiakovitz/goApps/src/restaurants/ui/src/utils/parser.js"],"names":["geocodeByAddress","getLatLng","google","parseData","data","Promise","all","map","restaurent","locationToAddress","Location","address","location","geocoder","maps","Geocoder","latlngStr","split","latlng","lat","parseFloat","lng","resolve","reject","geocode","results","status","console","log","formatted_address","Error","addressToLatLng","latLng"],"mappings":";;;AAAA,SACEA,gBADF,EAEEC,SAFF,QAGO,2BAHP;AAIA,OAAOC,MAAP,MAAmB,YAAnB;AAEA,gBAAsBC,SAAtB;AAAA;AAAA;;;;;2BAAO,kBAAyBC,IAAzB;AAAA;AAAA;AAAA;AAAA;AAAA,8CACEC,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,GAAL;AAAA;AAAA;AAAA;AAAA;AAAA,uCAAS,iBAAOC,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCACvBA,UADuB;AAAA;AAAA,+BAEXC,iBAAiB,CAACD,UAAU,CAACE,QAAZ,CAFN;;AAAA;AAAA;AAAA;AAE1BC,0BAAAA,OAF0B;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAT;;AAAA;AAAA;AAAA;AAAA,gBAAZ,CADF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAOP,gBAAsBF,iBAAtB;AAAA;AAAA;;;;;2BAAO,kBAAiCG,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AACL;AACMC,YAAAA,QAFD,GAEY,IAAIX,MAAM,CAACY,IAAP,CAAYC,QAAhB,EAFZ;AAGCC,YAAAA,SAHD,GAGaJ,QAAQ,CAACK,KAAT,CAAe,GAAf,EAAoB,CAApB,CAHb;AAICC,YAAAA,MAJD,GAIU;AACbC,cAAAA,GAAG,EAAEC,UAAU,CAACJ,SAAS,CAAC,CAAD,CAAV,CADF;AAEbK,cAAAA,GAAG,EAAED,UAAU,CAACJ,SAAS,CAAC,CAAD,CAAV;AAFF,aAJV;AAAA,8CASE,IAAIX,OAAJ,CAAY,UAASiB,OAAT,EAAkBC,MAAlB,EAA0B;AAC3CV,cAAAA,QAAQ,CAACW,OAAT,CAAiB;AAAC,4BAAYN;AAAb,eAAjB,EAAuC,UAASO,OAAT,EAAkBC,MAAlB,EAA0B;AAC/D,oBAAIA,MAAM,KAAK,IAAf,EAAqB;AACnBC,kBAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6BH,OAA7B;AACAH,kBAAAA,OAAO,CAACG,OAAO,CAAC,CAAD,CAAP,CAAWI,iBAAZ,CAAP;AACD,iBAHD,MAGO;AACLF,kBAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAL,kBAAAA,MAAM,CAAC,IAAIO,KAAJ,0CAA4ClB,QAA5C,EAAD,CAAN;AACD;AACF,eARD;AASD,aAVM,CATF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAsBP,gBAAsBmB,eAAtB;AAAA;AAAA;;;;;2BAAO,kBAA+BpB,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACiBX,gBAAgB,CAACW,OAAD,CADjC;;AAAA;AACCc,YAAAA,OADD;AAAA;AAAA,mBAEgBxB,SAAS,CAACwB,OAAO,CAAC,CAAD,CAAR,CAFzB;;AAAA;AAECO,YAAAA,MAFD;AAGLL,YAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BI,MAA1B;AAHK,wDAIKA,MAAM,CAACb,GAJZ,cAImBa,MAAM,CAACX,GAJ1B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import {\n  geocodeByAddress,\n  getLatLng,\n} from 'react-places-autocomplete';\nimport google from 'googleapis';\n\nexport async function parseData(data) {\n  return Promise.all(data.map(async (restaurent) =>({\n    ...restaurent,\n    address: await locationToAddress(restaurent.Location)\n  })));\n}\n\nexport async function locationToAddress(location) {\n  // return Promise.resolve('dffdf');\n  const geocoder = new google.maps.Geocoder;\n  const latlngStr = location.split(',', 2);\n  const latlng = {\n    lat: parseFloat(latlngStr[0]),\n    lng: parseFloat(latlngStr[1])\n  };\n\n  return new Promise(function(resolve, reject) {\n    geocoder.geocode({'location': latlng}, function(results, status) {\n      if (status === 'OK') {\n        console.log('google result:',results);\n        resolve(results[0].formatted_address);\n      } else {\n        console.log('google error');\n        reject(new Error(`Couldn't find the location for ${location}`));\n      }\n    })\n  })\n}\n\nexport async function addressToLatLng(address) {\n  const results = await geocodeByAddress(address);\n  const latLng = await getLatLng(results[0]);\n  console.log('important:', latLng);\n  return `${latLng.lat},${latLng.lng}`;\n}"]},"metadata":{},"sourceType":"module"}