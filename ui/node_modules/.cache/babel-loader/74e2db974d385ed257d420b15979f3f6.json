{"ast":null,"code":"import _regeneratorRuntime from \"/Users/pesiakovitz/goApps/src/restaurants/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/pesiakovitz/goApps/src/restaurants/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nimport { parseData, addressToLocation } from '../utils/geoParser';\nexport function setCurrent(data) {\n  return {\n    type: 'SET_CURRENT',\n    data: data\n  };\n}\nexport function load(data) {\n  return {\n    type: 'LOAD',\n    data: data\n  };\n}\nexport function update(data) {\n  return {\n    type: 'UPDATE',\n    data: data\n  };\n}\nexport function del(data) {\n  return {\n    type: 'DELETE',\n    data: data\n  };\n}\nexport function resetCurrentRestaurant(data) {\n  return {\n    type: 'RESET_CURRENT',\n    data: data\n  };\n}\nexport function changeCurrentRestaurant(data) {\n  return {\n    type: 'CHANGE_CURRENT',\n    data: data\n  };\n}\nexport function fetchRestaurants() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        var _ref2, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(\"api/restaurants/\");\n\n              case 2:\n                _ref2 = _context.sent;\n                data = _ref2.data;\n                _context.t0 = dispatch;\n                _context.t1 = load;\n                _context.next = 8;\n                return parseData(data);\n\n              case 8:\n                _context.t2 = _context.sent;\n                _context.t3 = (0, _context.t1)(_context.t2);\n                (0, _context.t0)(_context.t3);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function updateRestaurant(restaurant) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(dispatch) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return addressToLocation(restaurant.address);\n\n              case 2:\n                restaurant.Location = _context2.sent;\n                _context2.next = 5;\n                return axios.put(\"api/restaurants/\".concat(restaurant.Id), restaurant);\n\n              case 5:\n                dispatch(update({\n                  restaurant: restaurant\n                }));\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function deleteRestaurant(restaurant) {\n  return function (dispatch) {\n    return axios.delete(\"api/restaurants/\".concat(restaurant.Id)).then(function () {\n      dispatch(del({\n        Id: restaurant.Id\n      }));\n    });\n  };\n}\nexport function uploadRestaurants(file) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref4 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(dispatch) {\n        var formData, _ref5, data;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                formData = new FormData();\n                formData.append('file', file);\n                _context3.next = 4;\n                return axios.post(\"api/restaurants/upload\", formData);\n\n              case 4:\n                _ref5 = _context3.sent;\n                data = _ref5.data;\n                _context3.t0 = dispatch;\n                _context3.t1 = load;\n                _context3.next = 10;\n                return parseData(data);\n\n              case 10:\n                _context3.t2 = _context3.sent;\n                _context3.t3 = (0, _context3.t1)(_context3.t2);\n                (0, _context3.t0)(_context3.t3);\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x3) {\n        return _ref4.apply(this, arguments);\n      };\n    }()\n  );\n}","map":{"version":3,"sources":["/Users/pesiakovitz/goApps/src/restaurants/ui/src/actions/index.js"],"names":["axios","parseData","addressToLocation","setCurrent","data","type","load","update","del","resetCurrentRestaurant","changeCurrentRestaurant","fetchRestaurants","dispatch","get","updateRestaurant","restaurant","address","Location","put","Id","deleteRestaurant","delete","then","uploadRestaurants","file","formData","FormData","append","post"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { parseData, addressToLocation } from '../utils/geoParser'\n\nexport function setCurrent(data) {\n  return {\n    type: 'SET_CURRENT',\n    data,\n  };\n}\n\nexport function load(data) {\n  return {\n    type: 'LOAD',\n    data,\n  };\n}\n\nexport function update(data) {\n  return {\n    type: 'UPDATE',\n    data,\n  };\n}\n\nexport function del(data) {\n  return {\n    type: 'DELETE',\n    data,\n  };\n}\n\nexport function resetCurrentRestaurant(data) {\n  return {\n    type: 'RESET_CURRENT',\n    data,\n  };\n}\nexport function changeCurrentRestaurant(data) {\n  return {\n    type: 'CHANGE_CURRENT',\n    data,\n  };\n}\n\nexport function fetchRestaurants() {\n  return async function(dispatch) {\n    const { data } = await axios.get(\"api/restaurants/\");\n    dispatch(load(await parseData(data)));\n  };\n}\n\nexport function updateRestaurant(restaurant) {\n  return async function(dispatch) {\n    restaurant.Location = await addressToLocation(restaurant.address);\n    await axios.put(`api/restaurants/${restaurant.Id}`, restaurant)\n    dispatch(update({ restaurant }));\n  };\n}\n\nexport function deleteRestaurant(restaurant) {\n  return function(dispatch) {\n    return axios.delete(`api/restaurants/${restaurant.Id}`)\n      .then(() => {\n      dispatch(del({ Id: restaurant.Id }));\n    });\n  };\n}\n\nexport function uploadRestaurants(file) {\n  return async function(dispatch) {\n    const formData = new FormData();\n    formData.append('file', file);\n    const { data } = await axios.post(\"api/restaurants/upload\", formData)\n    dispatch(load(await parseData(data)));\n  };\n}"]},"metadata":{},"sourceType":"module"}