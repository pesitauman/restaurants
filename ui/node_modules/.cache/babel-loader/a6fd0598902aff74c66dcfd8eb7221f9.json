{"ast":null,"code":"import _regeneratorRuntime from \"/Users/pesiakovitz/goApps/src/restaurants/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/pesiakovitz/goApps/src/restaurants/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nimport { parseData, addressToLatLng } from './utils/parser';\nexport function setCurrent(data) {\n  return {\n    type: 'SET_CURRENT',\n    data: data\n  };\n}\nexport function load(data) {\n  return {\n    type: 'LOAD',\n    data: data\n  };\n}\nexport function update(data) {\n  return {\n    type: 'UPDATE',\n    data: data\n  };\n}\nexport function del(data) {\n  return {\n    type: 'DELETE',\n    data: data\n  };\n}\nexport function resetCurrentRestaurant(data) {\n  return {\n    type: 'RESET_CURRENT',\n    data: data\n  };\n}\nexport function changeCurrentRestaurant(data) {\n  return {\n    type: 'CHANGE_CURRENT',\n    data: data\n  };\n}\nexport function fetchRestaurants() {\n  return _fetchRestaurants.apply(this, arguments);\n}\n\nfunction _fetchRestaurants() {\n  _fetchRestaurants = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", function (dispatch) {\n              return axios.get(\"api/restaurants/\").then(function (_ref3) {\n                var data = _ref3.data;\n                dispatch(load(data));\n              });\n            });\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _fetchRestaurants.apply(this, arguments);\n}\n\nexport function updateRestaurant(restaurant) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return addressToLatLng(restaurant.address);\n\n              case 2:\n                restaurant.Location = _context.sent;\n                return _context.abrupt(\"return\", axios.put(\"api/restaurants/\".concat(restaurant.Id), restaurant).then(function () {\n                  console.log('data:::::', restaurant);\n                  dispatch(update({\n                    restaurant: restaurant\n                  }));\n                }));\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function deleteRestaurant(restaurant) {\n  return function (dispatch) {\n    return axios.delete(\"api/restaurants/\".concat(restaurant.Id)).then(function () {\n      dispatch(del({\n        Id: restaurant.Id\n      }));\n    });\n  };\n}\nexport function uploadRestaurants(file) {\n  return function (dispatch) {\n    var data = new FormData();\n    data.append('file', file);\n    return axios.post(\"api/restaurants/upload\", data).then(function (_ref2) {\n      var data = _ref2.data;\n      return parseData(data).then(function (data) {\n        console.log('wwwwwww', data);\n        dispatch(load(data));\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/Users/pesiakovitz/goApps/src/restaurants/ui/src/actions.js"],"names":["axios","parseData","addressToLatLng","setCurrent","data","type","load","update","del","resetCurrentRestaurant","changeCurrentRestaurant","fetchRestaurants","dispatch","get","then","updateRestaurant","restaurant","address","Location","put","Id","console","log","deleteRestaurant","delete","uploadRestaurants","file","FormData","append","post"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { parseData, addressToLatLng } from './utils/parser'\n\nexport function setCurrent(data) {\n  return {\n    type: 'SET_CURRENT',\n    data,\n  };\n}\n\nexport function load(data) {\n  return {\n    type: 'LOAD',\n    data,\n  };\n}\n\nexport function update(data) {\n  return {\n    type: 'UPDATE',\n    data,\n  };\n}\n\nexport function del(data) {\n  return {\n    type: 'DELETE',\n    data,\n  };\n}\n\nexport function resetCurrentRestaurant(data) {\n  return {\n    type: 'RESET_CURRENT',\n    data,\n  };\n}\nexport function changeCurrentRestaurant(data) {\n  return {\n    type: 'CHANGE_CURRENT',\n    data,\n  };\n}\n\nexport async function fetchRestaurants() {\n  return function(dispatch) {\n    return axios.get(\"api/restaurants/\")\n      .then(({ data }) => {\n      dispatch(load(data));\n    });\n  };\n}\n\nexport function updateRestaurant(restaurant) {\n  return async function(dispatch) {\n    restaurant.Location = await addressToLatLng(restaurant.address);\n    return axios.put(`api/restaurants/${restaurant.Id}`, restaurant)\n      .then(() => {\n        console.log('data:::::',restaurant)\n      dispatch(update({ restaurant }));\n    });\n  };\n}\n\nexport function deleteRestaurant(restaurant) {\n  return function(dispatch) {\n    return axios.delete(`api/restaurants/${restaurant.Id}`)\n      .then(() => {\n      dispatch(del({ Id: restaurant.Id }));\n    });\n  };\n}\n\nexport function uploadRestaurants(file) {\n  return function(dispatch) {\n    const data = new FormData();\n    data.append('file', file);\n    return axios.post(\"api/restaurants/upload\", data)\n    .then(({ data }) => {\n      return parseData(data)\n      .then((data) => {\n        console.log('wwwwwww',data)\n        dispatch(load(data));\n      })\n    });\n  };\n}"]},"metadata":{},"sourceType":"module"}