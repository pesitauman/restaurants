{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getPaginationUrl = exports.hasOwnProperties = exports.apiRequest = exports.noop = exports.jsonContentTypes = undefined;\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _createError = require('axios/lib/core/createError');\n\nvar _createError2 = _interopRequireDefault(_createError);\n\nvar _objectPathImmutable = require('object-path-immutable');\n\nvar _objectPathImmutable2 = _interopRequireDefault(_objectPathImmutable);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar jsonContentTypes = exports.jsonContentTypes = ['application/json', 'application/vnd.api+json'];\n\nvar hasValidContentType = function hasValidContentType(response) {\n  return jsonContentTypes.some(function (contentType) {\n    return response.headers['content-type'].indexOf(contentType) > -1;\n  });\n};\n\nvar noop = exports.noop = function noop() {};\n\nvar apiRequest = exports.apiRequest = function apiRequest(url) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var allOptions = (0, _objectPathImmutable2.default)(options).set('url', url).set(['headers', 'Accept'], 'application/vnd.api+json').set(['headers', 'Content-Type'], 'application/vnd.api+json').value();\n  return (0, _axios2.default)(allOptions).then(function (res) {\n    if (res.status === 204) {\n      return res;\n    }\n\n    if (hasValidContentType(res) === false) {\n      throw (0, _createError2.default)('Invalid Content-Type in response', res.config, null, res);\n    }\n\n    return res.data;\n  });\n};\n\nvar hasOwnProperties = exports.hasOwnProperties = function hasOwnProperties(obj, propertyTree) {\n  if (obj instanceof Object === false) {\n    return false;\n  }\n\n  var property = propertyTree[0];\n  var hasProperty = obj.hasOwnProperty(property);\n\n  if (hasProperty) {\n    if (propertyTree.length === 1) {\n      return hasProperty;\n    }\n\n    return hasOwnProperties(obj[property], propertyTree.slice(1));\n  }\n\n  return false;\n};\n\nvar getPaginationUrl = exports.getPaginationUrl = function getPaginationUrl(response, direction, path) {\n  if (!response.links || !hasOwnProperties(response, ['links', direction])) {\n    return null;\n  }\n\n  var paginationUrl = response.links[direction];\n\n  if (!paginationUrl) {\n    return null;\n  }\n\n  if (hasOwnProperties(response.links[direction], ['href'])) {\n    paginationUrl = response.links[direction].href;\n  }\n\n  return paginationUrl.replace(path + '/', '');\n};","map":null,"metadata":{},"sourceType":"script"}